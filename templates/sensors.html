{% load static %}
<!DOCTYPE html>
<html>
<head >
    <title>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤</title>
    <link rel = "stylesheet" href = {% static "sensor.css" %}> 
</head>
<body>
    <h1>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞</h1>
    <div class = "arrow">
        <a href="/" class="back-arrow">ü¢§</a>
    </div>    
    <div class="panel">
        <div class="label">üß† CPU –Ω–∞–≥—Ä—É–∑–∫–∞</div>
        <div class="value" id="cpu">--</div>
    </div>

    <div class="panel">
        <div class="label">üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏</div>
        <div class="value" id="mem">--</div>
    </div>

    <div class="panel">
        <div class="label">üìÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞</div>
        <div class="value" id="disk">--</div>
    </div>

    <script>
        async function fetchSensorData() {
            try {
                const response = await fetch('/api/sensors/');
                const data = await response.json();
                document.getElementById('cpu').textContent = data.cpu + ' %';
                document.getElementById('mem').textContent = data.mem + ' %';
                document.getElementById('disk').textContent = data.disk + ' %';
            } catch (err) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', err);
            }
        }

        setInterval(fetchSensorData, 2000);
        fetchSensorData();
    </script>
</body>
</html>
